<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="sample-data-Membership-01" author="mhoennig" context="sample-data">
        <loadData encoding="UTF-8"
                  file="config/liquibase/sample-data/memberships.csv"
                  separator=";"
                  tableName="membership">
        </loadData>

        <!-- Liquibase CSV files can contain linebreaks just as real linebreaks, but which
             make the CSV files hard to read. Therefore I've encoded linebreaks as '|' and
             replace these after import with '\n'. -->
        <sql>
            UPDATE membership SET remark = REPLACE(remark, '|', STRINGDECODE('\n'));
        </sql>

        <rollback>
            DELETE FROM membership;
        </rollback>
    </changeSet>

</databaseChangeLog>
