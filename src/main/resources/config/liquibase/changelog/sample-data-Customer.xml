<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="sample-data-Customer-01" author="mhoennig" context="sample-data">
        <loadData encoding="UTF-8"
                  file="config/liquibase/sample-data/customers.csv"
                  separator=";"
                  quotchar="'"
                  tableName="customer">
            <column name="id" type="numeric"/>
            <column name="jhi_number" type="numeric"/>
            <column name="prefix" type="string"/>
            <column name="name" type="string"/>
            <column name="contractual_address" type="string"/>
        </loadData>

        <!-- Liquibase CSV files can contain linebreaks just as real linebreaks, but which
             make the CSV files hard to read. Therefore I've encoded linebreaks as '|' and
             replace these after import with '\n'. -->
        <sql>
            UPDATE customer SET contractual_address = REPLACE(contractual_address, '|', STRINGDECODE('\n'));
        </sql>

        <rollback>
            DELETE FROM customer;
        </rollback>
    </changeSet>

</databaseChangeLog>
